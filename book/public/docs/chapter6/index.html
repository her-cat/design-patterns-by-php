<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="第六章 穿什么有这么重要吗 －－－ 装饰模式 #  &lt;?php abstract class Component { abstract public function Operation(); } /** * ConcreteComponent */ class ConcreteComponent extends Component { public function Operation() { echo &#34;具体对象的操作.\n&#34;; } } abstract class Decorator extends Component { protected $component; // 设置component  public function SetComponent($component) { $this-&gt;component = $component; } // 重写Operation(),实际执行的是component的Operation方法  public function Operation() { if ($this-&gt;component != null) { $this-&gt;component-&gt;Operation(); } } } /** * ConcreteDecoratorA */ class ConcreteDecoratorA extends Decorator { // 本类的独有功能，以区别于ConcreteDecoratorB  private $addedState; public function Operation() { // 首先运行原Component的Operation(),再执行本类的功能，  // 如addedState,相当于对原Component进行了装饰  parent::Operation(); $this-&gt;addedState = &#34;ConcreteDecoratorA Status&#34;; echo $this-&gt;addedState.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="第六章 穿什么有这么重要吗 －－－ 装饰模式" />
<meta property="og:description" content="第六章 穿什么有这么重要吗 －－－ 装饰模式 #  &lt;?php abstract class Component { abstract public function Operation(); } /** * ConcreteComponent */ class ConcreteComponent extends Component { public function Operation() { echo &#34;具体对象的操作.\n&#34;; } } abstract class Decorator extends Component { protected $component; // 设置component  public function SetComponent($component) { $this-&gt;component = $component; } // 重写Operation(),实际执行的是component的Operation方法  public function Operation() { if ($this-&gt;component != null) { $this-&gt;component-&gt;Operation(); } } } /** * ConcreteDecoratorA */ class ConcreteDecoratorA extends Decorator { // 本类的独有功能，以区别于ConcreteDecoratorB  private $addedState; public function Operation() { // 首先运行原Component的Operation(),再执行本类的功能，  // 如addedState,相当于对原Component进行了装饰  parent::Operation(); $this-&gt;addedState = &#34;ConcreteDecoratorA Status&#34;; echo $this-&gt;addedState." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://design-patterns-by-php.hulin.ink/docs/chapter6/" />

<title>第六章 穿什么有这么重要吗 －－－ 装饰模式 | design-patterns-by-php</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.134b70e5316650a530cb42e4e8630b2a01d532bebfc0337028211175336e4806.css" integrity="sha256-E0tw5TFmUKUwy0Lk6GMLKgHVMr6/wDNwKCERdTNuSAY=">
<script defer src="/en.search.min.9e32b36e065fcc0a76dade0cc47798d1533be64df6d2282bd5b4fb040caf152d.js" integrity="sha256-njKzbgZfzAp22t4MxHeY0VM75k320igr1bT7BAyvFS0="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>design-patterns-by-php</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:inline-block;width:150px;height:150px"
     data-ad-client="ca-pub-7831293577942835"
     data-ad-slot="3207787152"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>








  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/%E5%BA%8F%E8%A8%80/" class="">序言</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter1/" class="">第一章 代码无错就是优 －－－ 简单工厂模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter2/" class="">第二章 商场促销 －－－ 策略模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter3/" class="">第三章 拍摄UFO －－－ 单一职责原则</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter4/" class="">第四章 研求职两不误 －－－ 开放－封闭原则</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter5/" class="">第五章 会修电脑不会修收音机？ －－－ 依赖倒转原则</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter6/" class=" active">第六章 穿什么有这么重要吗 －－－ 装饰模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter7/" class="">第七章 为别人做嫁衣 －－－ 代理模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter8/" class="">第八章 雷锋依然在人间 －－－ 工厂方法模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter9/" class="">第九章 简历复印 －－－ 原型模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter10/" class="">第十章 考题抄错会做也白搭 －－－ 模版方法模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter11/" class="">第十一章 无熟人难办事 －－－ 迪米特法则</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter12/" class="">第十二章 牛市股票还会亏钱 －－－ 外观模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter13/" class="">第十三章 好菜每回味不同 －－－ 建造者模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter14/" class="">第十四章 老板回来，我不知道 －－－ 观察者模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter15/" class="">第十五章 就不能不换DB吗？ －－－ 抽象工厂模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter16/" class="">第十六章 无尽加班何时休 －－－ 状态模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter17/" class="">第十七章 在NBA我需要翻译 －－－ 适配器模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter18/" class="">第十八章 如果再回到从前 －－－ 备忘录模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter19/" class="">第十九章 分公司＝一部分  －－－ 组合模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter20/" class="">第二十章 想走？可以！先买票 －－－ 迭代器模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter21/" class="">第二十一章 有些类也需要计划生育 －－－ 单例模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter22/" class="">第二十二章 手机软件何时统 －－－ 桥接模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter23/" class="">第二十三章 烤羊肉串引来的思考 －－－ 命令模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter24/" class="">第二十四章 加薪非要老总批 －－－ 职责链模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter25/" class="">第二十五章 世界需要和平 －－－ 中介者模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter26/" class="">第二十六章 项目多也别傻做 －－－ 享元模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter27/" class="">第二十七章 其实你不懂老板的心 －－－ 解释器模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter28/" class="">第二十八章 男人和女人 －－－ 访问者模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://design-patterns-by-php.hulin.ink/docs/chapter29/" class="">第二十九章 OOTV杯超级模式大赛 －－－ 模式总结</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>第六章 穿什么有这么重要吗 －－－ 装饰模式</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#第六章-穿什么有这么重要吗--装饰模式">第六章 穿什么有这么重要吗 －－－ 装饰模式</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h3 id="第六章-穿什么有这么重要吗--装饰模式">
  第六章 穿什么有这么重要吗 －－－ 装饰模式
  <a class="anchor" href="#%e7%ac%ac%e5%85%ad%e7%ab%a0-%e7%a9%bf%e4%bb%80%e4%b9%88%e6%9c%89%e8%bf%99%e4%b9%88%e9%87%8d%e8%a6%81%e5%90%97--%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>

<span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Component</span>
{
    <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Operation</span>();
}

<span style="color:#e6db74">/**
</span><span style="color:#e6db74">* ConcreteComponent
</span><span style="color:#e6db74">*/</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConcreteComponent</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Component</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Operation</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;具体对象的操作.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
    }
}

<span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Decorator</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Component</span>
{
    <span style="color:#66d9ef">protected</span> $component;

    <span style="color:#75715e">// 设置component
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">SetComponent</span>($component)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">component</span> <span style="color:#f92672">=</span> $component;
    }

    <span style="color:#75715e">// 重写Operation(),实际执行的是component的Operation方法
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Operation</span>()
    {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">component</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>)
        {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">component</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">Operation</span>();
        }
    }
}

<span style="color:#e6db74">/**
</span><span style="color:#e6db74">* ConcreteDecoratorA
</span><span style="color:#e6db74">*/</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConcreteDecoratorA</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Decorator</span>
{
    <span style="color:#75715e">// 本类的独有功能，以区别于ConcreteDecoratorB
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> $addedState;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Operation</span>()
    {   
        <span style="color:#75715e">// 首先运行原Component的Operation(),再执行本类的功能，
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 如addedState,相当于对原Component进行了装饰
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">Operation</span>();
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addedState</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ConcreteDecoratorA Status&#34;</span>;
        <span style="color:#66d9ef">echo</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addedState</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;具体装饰对象A的操作.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
    }
}


<span style="color:#e6db74">/**
</span><span style="color:#e6db74">* ConcreteDecoratorB
</span><span style="color:#e6db74">*/</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConcreteDecoratorB</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Decorator</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Operation</span>()
    {   
        <span style="color:#75715e">// 首先运行原Component的Operation(),再执行本类的功能，
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 如addedBehavior,相当于对原Component进行了装饰
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">Operation</span>();
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addedBehavior</span>();
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;具体装饰对象B的操作.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
    }

    <span style="color:#75715e">// 本类的独有功能，以区别于ConcreteDecoratorA
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">addedBehavior</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;ConcreteDecoratorB Status.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
    }
}

<span style="color:#75715e">// 客户端代码
</span><span style="color:#75715e">// 装饰的方法是：首先用ConcreteComponent实例化对象c,
</span><span style="color:#75715e">// 然后用ConcreteDecoratorA的实例对象$di来包装$c,
</span><span style="color:#75715e">// 然后再用ConcreteDecoratorB的实例$d2包装$d1,
</span><span style="color:#75715e">// 最终执行$d2的Operation(); 
</span><span style="color:#75715e"></span>$c <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ConcreteComponent</span>();
$d1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ConcreteDecoratorA</span>();
$d2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ConcreteDecoratorB</span>();

$d1<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">SetComponent</span>($c);
$d2<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">SetComponent</span>($d1);
$d2<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">Operation</span>();
</code></pre></div><blockquote>
<p>当只有一个ConcreteComponent类而没有抽象的Component类 ，那么Decorator类可以是ConcreteComponent的一个子类。同样的道理，如果只有一个ConcreteDecorator类 ，那么就没有必要建立一个单独的Decorator类，而可以把Decorator类和ConcreteComponent类的责任合并成一个类。</p>
</blockquote>
<p>书中用打扮的代码阐释了这样情况下的写法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span> 

<span style="color:#75715e">// 人
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
{   
    <span style="color:#66d9ef">private</span> $name;
    <span style="color:#66d9ef">function</span> __construct($name)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> $name;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;打扮&#34;</span><span style="color:#f92672">.</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">name</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
    }
}


<span style="color:#75715e">// 服饰类
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">protected</span> $person;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">decorate</span>($person)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">person</span> <span style="color:#f92672">=</span> $person;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">person</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>)
        {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">person</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">show</span>();
        }
    }
}

<span style="color:#75715e">// 具体服饰类
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TShirts</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;大T恤</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BigTrouser</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;跨裤</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sneakers</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;破球鞋</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Suit</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;西装</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tie</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;领带</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LeatherShoes</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Finery</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;跨裤</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
        <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
    }
}


<span style="color:#75715e">// 客户端代码
</span><span style="color:#75715e"></span>$person <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span>(<span style="color:#e6db74">&#34;alex&#34;</span>);

$sneakers <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Sneakers</span>();
$bigTrouser <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">BigTrouser</span>();
$tShirts <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TShirts</span>();

$sneakers<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">decorate</span>($person);
$bigTrouser<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">decorate</span>($sneakers);
$tShirts<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">decorate</span>($bigTrouser);
$tShirts<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">show</span>();
</code></pre></div><p>总结</p>
<blockquote>
<p><em><strong>装饰模式</strong></em>，动态地给一个对象添加一些额外的职责，就增加功能来说，装饰模式比生成子类更为灵活。</p>
</blockquote>
<blockquote>
<p>装饰模式是为已有功能动态的添加更多功能的一种方式。</p>
</blockquote>
<blockquote>
<p>当系统需要新功能的时候，是向旧的类中添加新的代码。这些新的代码通常装饰了原有类的核心职责或主要行为。</p>
</blockquote>
<blockquote>
<p>在主类中加入新的字段，新的方法和新的逻辑，从而增加了主类的复杂度，而这些新加入的东西仅仅是为满足一些只在某种特定情况下才会执行的特殊行为的需要。装饰模式却提供了一个非常好的解决方案，它把每个要装饰的功能放在单独的类中，并让这个类包装它要装饰的对象，对此，当需要执行特殊行为时，客户代码就可以在运行时根据需要选择地，按顺序地使用装饰功能包装对象了。</p>
</blockquote>
<blockquote>
<p>装饰模式的优点就是把类中的装饰功能从类中搬移去除，这样可以简化原有的类。</p>
</blockquote>
<blockquote>
<p>有效地把类的核心职责和装饰功能区分开了，而且可以去除相关类中的重复的装饰逻辑。</p>
</blockquote>
<p>上一章：<a href="/docs/chapter5/">第五章 会修电脑不会修收音机？ －－－ 依赖倒转原则</a></p>
<p>下一章：<a href="/docs/chapter7/">第七章 为别人做嫁衣 －－－ 代理模式</a></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#第六章-穿什么有这么重要吗--装饰模式">第六章 穿什么有这么重要吗 －－－ 装饰模式</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












